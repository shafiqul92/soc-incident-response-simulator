<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Network Incident Response Simulator</title>
    <link rel="stylesheet" href="{{ url_for('static', filename='css/style.css') }}">
    <script src="https://cdn.jsdelivr.net/npm/chart.js"></script>
</head>
<body>
    <div class="container">
        <header>
            <h1>Network Incident Response Simulator</h1>
            <p class="subtitle">SOC-Style Training Tool for DDoS, Data Breach, and Ransomware Scenarios</p>
        </header>

        <!-- Scenario Selection Screen -->
        <div id="scenario-selection" class="screen active">
            <div class="intro-section">
                <h2>Welcome to the Network Incident Response Simulator</h2>
                <div class="intro-content">
                    <div class="intro-text">
                        <h3>Our Goal</h3>
                        <p>This interactive simulator provides hands-on training for Security Operations Center (SOC) analysts and cybersecurity students. Practice real-world incident response in a safe, synthetic environment without any actual security risks.</p>
                        
                        <h3>What You'll Learn</h3>
                        <ul>
                            <li><strong>Indicator Recognition:</strong> Identify common attack patterns and security indicators across different incident types</li>
                            <li><strong>NIST-Aligned Response:</strong> Practice the complete incident response lifecycle (Detection → Containment → Eradication → Recovery)</li>
                            <li><strong>Decision-Making:</strong> Make critical containment and remediation choices under realistic pressure</li>
                            <li><strong>Best Practices:</strong> Learn industry-standard incident response procedures and mitigation strategies</li>
                        </ul>
                        
                        <h3>How It Works</h3>
                        <p>Each scenario presents a realistic security incident through a series of events (alerts, logs, and system metrics). As events unfold, you'll encounter decision points where you must choose the best response action. Your choices are scored based on priority and effectiveness, with immediate feedback explaining why certain actions are better than others.</p>
                        
                        <p class="note"><strong>Note:</strong> All scenarios use synthetic data based on NIST SP 800-61, CISA playbooks, and real-world attack patterns. No real systems or data are involved.</p>
                    </div>
                </div>
            </div>
            
            <h2 style="margin-top: 40px;">Select a Scenario</h2>
            <div class="scenario-grid" id="scenario-list">
                <!-- Scenarios will be loaded here -->
            </div>
        </div>

        <!-- Simulation Screen -->
        <div id="simulation-screen" class="screen">
            <div class="simulation-header">
                <div class="header-left">
                    <h2 id="scenario-title">Scenario</h2>
                    <button id="back-btn" class="btn-secondary">Back to Scenarios</button>
                </div>
                <div class="header-right">
                    <div class="score-display">
                        <span>Score: <strong id="current-score">0</strong> / <strong id="max-score">0</strong></span>
                        <div class="score-bar">
                            <div id="score-fill" class="score-fill"></div>
                        </div>
                        <button id="rubric-btn" class="btn-secondary" style="margin-top: 10px; width: 100%;">View Scoring Rubric</button>
                    </div>
                </div>
            </div>

            <!-- Scenario Tabs (shown when scenario has sub-scenarios) -->
            <div id="scenario-tabs" class="scenario-tabs" style="display: none;">
                <div class="tabs-container" id="tabs-container">
                    <!-- Tabs will be dynamically added here -->
                </div>
            </div>
            
            <!-- Scenario Description -->
            <div id="scenario-description" class="scenario-description" style="display: none;">
                <div class="description-content">
                    <h3 id="description-title">Scenario Overview</h3>
                    <p id="description-text"></p>
                </div>
            </div>

            <div class="simulation-content">
                <!-- Left Panel: Events and Logs -->
                <div class="left-panel">
                    <div class="panel-header">
                        <h3>Events & Logs</h3>
                        <button id="next-event-btn" class="btn-primary" style="display: none;">Next Event</button>
                    </div>
                    <div class="severity-legend">
                        <h4>Severity Indicators:</h4>
                        <div class="legend-items">
                            <div class="legend-item">
                                <div class="legend-bar alert-critical"></div>
                                <span>Critical - Immediate action required</span>
                            </div>
                            <div class="legend-item">
                                <div class="legend-bar alert-high"></div>
                                <span>High - Urgent attention needed</span>
                            </div>
                            <div class="legend-item">
                                <div class="legend-bar alert-medium"></div>
                                <span>Medium - Monitor closely</span>
                            </div>
                            <div class="legend-item">
                                <div class="legend-bar alert-low"></div>
                                <span>Low - Informational / Recovery</span>
                            </div>
                        </div>
                    </div>
                    <div id="events-container" class="events-container">
                        <!-- Events will be displayed here -->
                    </div>
                </div>

                <!-- Right Panel: Metrics and Decisions -->
                <div class="right-panel">
                    <!-- Metrics Dashboard -->
                    <div class="metrics-section">
                        <h3>System Metrics</h3>
                        <div class="metrics-grid">
                            <div class="metric-card">
                                <div class="metric-label">CPU Usage</div>
                                <div class="metric-value" id="cpu-usage">--</div>
                                <canvas id="cpu-chart"></canvas>
                            </div>
                            <div class="metric-card">
                                <div class="metric-label">Memory Usage</div>
                                <div class="metric-value" id="memory-usage">--</div>
                                <canvas id="memory-chart"></canvas>
                            </div>
                            <div class="metric-card">
                                <div class="metric-label">Network Traffic</div>
                                <div class="metric-value" id="network-traffic">--</div>
                                <canvas id="network-chart"></canvas>
                            </div>
                        </div>
                    </div>

                    <!-- Decision Point -->
                    <div id="decision-section" class="decision-section" style="display: none;">
                        <h3>Decision Required</h3>
                        <p id="decision-description"></p>
                        <div id="decision-options" class="decision-options">
                            <!-- Options will be displayed here -->
                        </div>
                    </div>

                    <!-- Feedback Section -->
                    <div id="feedback-section" class="feedback-section" style="display: none;">
                        <h3>Feedback</h3>
                        <div id="feedback-content"></div>
                    </div>
                </div>
            </div>
        </div>

        <!-- Completion Screen -->
        <div id="completion-screen" class="screen">
            <div class="completion-content">
                <h2>Scenario Complete!</h2>
                <div class="final-score">
                    <h3>Final Score</h3>
                    <div class="score-circle">
                        <span id="final-score-percentage">0%</span>
                    </div>
                    <p><strong id="final-score">0</strong> / <strong id="final-max-score">0</strong> points</p>
                </div>
                <div class="recommendations">
                    <h3>NIST-Aligned Recommendations</h3>
                    <div id="recommendations-list"></div>
                </div>
                <div class="completion-actions">
                    <button id="restart-btn" class="btn-primary">Try Another Scenario</button>
                </div>
            </div>
        </div>
    </div>

    <!-- Rubric Modal -->
    <div id="rubric-modal" class="modal" style="display:none;">
        <div class="modal-content">
            <div class="modal-header">
                <h3>Scoring Rubric</h3>
                <button id="rubric-close" class="btn-secondary">Close</button>
            </div>
            <div class="modal-body">
                <p>The simulator scores each decision by priority and effectiveness of the action:</p>
                <ul>
                    <li><strong>10 points (Optimal)</strong>: Highest-priority best practice that immediately contains or mitigates the incident.</li>
                    <li><strong>8–9 points (Strong)</strong>: Correct action that is effective but slightly slower or requires coordination.</li>
                    <li><strong>3–5 points (Partial)</strong>: Action indicates effort but is not the recommended approach or has notable drawbacks.</li>
                    <li><strong>0–2 points (Incorrect)</strong>: Ineffective or risky action; delays containment or worsens the situation.</li>
                </ul>
                <p>Feedback explains why an action earned its score and how to improve next time. Final recommendations are aligned to NIST SP 800‑61.</p>
            </div>
        </div>
    </div>

    <script src="{{ url_for('static', filename='js/app.js') }}"></script>
</body>
</html>

